"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[9224],{9224:(Rt,h,d)=>{d.r(h),d.d(h,{ProductManagementModule:()=>jt});var p=d(2200),l=d(7343),s=d(4341),y=d(8132),x=d(467),P=d(1413),F=d(9584),I=d(3294),M=d(6977),t=d(3664),c=d(2615),v=d(5035),C=d(9330),f=d(8810),g=d(9437),j=d(5312),R=d(8938),$=d(3067);let G=(()=>{var e;class a{constructor(i,r){this.http=i,this.loginService=r,this.API_URL=`${j.c.apiBaseUrl}/product`}getHeaders(){const i=this.loginService.getToken();return new C.Lr({"Content-Type":"application/json",Authorization:`Bearer ${i}`})}getProducts(i=1,r=R.R.TEN,o){let m=`${this.API_URL}?page=${i}&itemsPerPage=${r}`;return o&&o.trim()&&(m+=`&search=${encodeURIComponent(o.trim())}`),this.http.get(m,{headers:this.getHeaders()}).pipe((0,g.W)(u=>(0,f.$)(()=>u)))}getProduct(i){return this.http.get(`${this.API_URL}/${i}`,{headers:this.getHeaders()}).pipe((0,g.W)(r=>(0,f.$)(()=>r)))}createProduct(i){const r={...i,createDate:(new Date).toISOString(),updateDate:(new Date).toISOString()};return this.http.post(this.API_URL,r,{headers:this.getHeaders()}).pipe((0,g.W)(o=>(0,f.$)(()=>o)))}updateProduct(i,r){const o={...r,updateDate:(new Date).toISOString()};return this.http.put(`${this.API_URL}/${i}`,o,{headers:this.getHeaders()}).pipe((0,g.W)(m=>(0,f.$)(()=>m)))}deleteProduct(i){return this.http.delete(`${this.API_URL}/${i}`,{headers:this.getHeaders()}).pipe((0,g.W)(r=>(0,f.$)(()=>r)))}static#t=e=()=>(this.\u0275fac=function(r){return new(r||a)(c.KVO(C.Qq),c.KVO($.H))},this.\u0275prov=c.jDH({token:a,factory:a.\u0275fac,providedIn:"root"}))}return e(),a})();function w(e,a){1&e&&(t.j41(0,"ion-card-subtitle"),t.EFF(1,"Please fill all required information"),t.k0s())}function E(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Product ID is required."),t.k0s())}function S(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,E,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.productId.errors?null:n.f.productId.errors.required)}}function N(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Product Name is required."),t.k0s())}function O(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,N,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.productName.errors?null:n.f.productName.errors.required)}}function T(e,a){if(1&e&&(t.j41(0,"ion-select-option",21),t.EFF(1),t.k0s()),2&e){const n=a.$implicit;t.Y8G("value",n),t.R7$(),t.JRh(n)}}function D(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Raw Material is required."),t.k0s())}function Y(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,D,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.rawMaterial.errors?null:n.f.rawMaterial.errors.required)}}function B(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Weight is required."),t.k0s())}function Q(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Weight must be >= 0."),t.k0s())}function q(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,B,2,0,"small",1)(2,Q,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.weight.errors?null:n.f.weight.errors.required),t.R7$(),t.Y8G("ngIf",null==n.f.weight.errors?null:n.f.weight.errors.min)}}function X(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Wastage is required."),t.k0s())}function W(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Wastage must be >= 0."),t.k0s())}function L(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Wastage must be an integer."),t.k0s())}function V(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,X,2,0,"small",1)(2,W,2,0,"small",1)(3,L,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.wastage.errors?null:n.f.wastage.errors.required),t.R7$(),t.Y8G("ngIf",null==n.f.wastage.errors?null:n.f.wastage.errors.min),t.R7$(),t.Y8G("ngIf",null==n.f.wastage.errors?null:n.f.wastage.errors.pattern)}}function H(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Norms are required."),t.k0s())}function z(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Norms must be >= 0."),t.k0s())}function U(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,H,2,0,"small",1)(2,z,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.norms.errors?null:n.f.norms.errors.required),t.R7$(),t.Y8G("ngIf",null==n.f.norms.errors?null:n.f.norms.errors.min)}}function A(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Cavity is required."),t.k0s())}function J(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Cavity must be >= 0."),t.k0s())}function K(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Cavity must be an integer."),t.k0s())}function Z(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,A,2,0,"small",1)(2,J,2,0,"small",1)(3,K,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.cavity.errors?null:n.f.cavity.errors.required),t.R7$(),t.Y8G("ngIf",null==n.f.cavity.errors?null:n.f.cavity.errors.min),t.R7$(),t.Y8G("ngIf",null==n.f.cavity.errors?null:n.f.cavity.errors.pattern)}}function tt(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Shot Rate is required."),t.k0s())}function et(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Shot Rate must be >= 0."),t.k0s())}function ot(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,tt,2,0,"small",1)(2,et,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.shotRate.errors?null:n.f.shotRate.errors.required),t.R7$(),t.Y8G("ngIf",null==n.f.shotRate.errors?null:n.f.shotRate.errors.min)}}function nt(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Rate is required."),t.k0s())}function rt(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Rate must be >= 0."),t.k0s())}function it(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,nt,2,0,"small",1)(2,rt,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.rate.errors?null:n.f.rate.errors.required),t.R7$(),t.Y8G("ngIf",null==n.f.rate.errors?null:n.f.rate.errors.min)}}function at(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Incentive Limit is required."),t.k0s())}function lt(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Incentive Limit must be >= 0."),t.k0s())}function st(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Incentive Limit must be an integer."),t.k0s())}function ct(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,at,2,0,"small",1)(2,lt,2,0,"small",1)(3,st,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.incentiveLimit.errors?null:n.f.incentiveLimit.errors.required),t.R7$(),t.Y8G("ngIf",null==n.f.incentiveLimit.errors?null:n.f.incentiveLimit.errors.min),t.R7$(),t.Y8G("ngIf",null==n.f.incentiveLimit.errors?null:n.f.incentiveLimit.errors.pattern)}}function dt(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Production Shot Qty is required."),t.k0s())}function mt(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Production Shot Qty must be >= 0."),t.k0s())}function ut(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Production Shot Qty must be an integer."),t.k0s())}function pt(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,dt,2,0,"small",1)(2,mt,2,0,"small",1)(3,ut,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.productionShotQty.errors?null:n.f.productionShotQty.errors.required),t.R7$(),t.Y8G("ngIf",null==n.f.productionShotQty.errors?null:n.f.productionShotQty.errors.min),t.R7$(),t.Y8G("ngIf",null==n.f.productionShotQty.errors?null:n.f.productionShotQty.errors.pattern)}}function ft(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Per Hour Prod. Qty is required."),t.k0s())}function gt(e,a){1&e&&(t.j41(0,"small"),t.EFF(1,"Per Hour Prod. Qty must be >= 0."),t.k0s())}function _t(e,a){if(1&e&&(t.j41(0,"ion-text",20),t.DNE(1,ft,2,0,"small",1)(2,gt,2,0,"small",1),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngIf",null==n.f.perHourProdQty.errors?null:n.f.perHourProdQty.errors.required),t.R7$(),t.Y8G("ngIf",null==n.f.perHourProdQty.errors?null:n.f.perHourProdQty.errors.min)}}function ht(e,a){if(1&e){const n=t.RV6();t.j41(0,"ion-row")(1,"ion-col",22)(2,"ion-button",23),t.EFF(3," Save "),t.k0s()(),t.j41(4,"ion-col",22)(5,"ion-button",24),t.bIt("click",function(){c.eBV(n);const r=t.XpG();return c.Njj(r.goBack())}),t.EFF(6," Cancel "),t.k0s()()()}if(2&e){const n=t.XpG();t.R7$(2),t.Y8G("disabled",n.productForm.invalid)}}let b=(()=>{var e;class a{constructor(i){this.fb=i,this.mode="create",this.formData=null,this.formSubmit=new t.bkB,this.formClosed=new t.bkB,this.rawMaterials=["Steel","Aluminum","Plastic","Copper"],this.productForm=this.fb.group({productId:["",s.k0.required],productName:["",s.k0.required],rawMaterial:["",s.k0.required],weight:[0,[s.k0.required,s.k0.min(0)]],wastage:[0,[s.k0.required,s.k0.min(0),s.k0.pattern("^[0-9]+$")]],norms:[0,[s.k0.required,s.k0.min(0)]],totalWeight:[{value:0,disabled:!0}],cavity:[0,[s.k0.required,s.k0.min(0),s.k0.pattern("^[0-9]+$")]],shotRate:[0,[s.k0.required,s.k0.min(0)]],rate:[0,[s.k0.required,s.k0.min(0)]],incentiveLimit:[0,[s.k0.required,s.k0.min(0),s.k0.pattern("^[0-9]+$")]],productionShotQty:[0,[s.k0.required,s.k0.min(0),s.k0.pattern("^[0-9]+$")]],perHourProdQty:[0,[s.k0.required,s.k0.min(0)]]}),this.productForm.get("weight")?.valueChanges.subscribe(()=>this.updateTotalWeight()),this.productForm.get("wastage")?.valueChanges.subscribe(()=>this.updateTotalWeight())}ngOnInit(){this.formData&&this.patchForm(this.formData)}ngOnChanges(i){i.formData&&this.formData?(this.patchForm(this.formData),"read"===this.mode?this.productForm.disable():this.productForm.enable(),this.updateTotalWeight()):"create"===this.mode&&(this.resetForm(),this.productForm.enable())}get f(){return this.productForm.controls}patchForm(i){this.productForm.patchValue({productId:i.prodId,productName:i.prodName,rawMaterial:i.rawMaterial,weight:i.weight,wastage:i.wastage,norms:i.norms,totalWeight:i.totalWeight,cavity:i.cavity,shotRate:i.shotRate,rate:i.perItemRate,incentiveLimit:i.incentiveLimit,productionShotQty:0,perHourProdQty:0})}resetForm(){this.productForm.reset()}goBack(){this.formClosed.emit()}updateTotalWeight(){const o=(this.productForm.get("weight")?.value||0)*(1+(this.productForm.get("wastage")?.value||0)/100);this.productForm.get("totalWeight")?.setValue(o,{emitEvent:!1})}onSubmit(){if("read"===this.mode)return;if(this.productForm.invalid)return void this.productForm.markAllAsTouched();const i=this.productForm.getRawValue(),r={prodIdSeq:this.formData?.prodIdSeq||0,prodId:i.productId,prodName:i.productName,rawMaterial:i.rawMaterial,weight:i.weight,wastage:i.wastage,norms:i.norms,totalWeight:i.totalWeight,cavity:i.cavity,shotRate:i.shotRate,perItemRate:i.rate,incentiveLimit:i.incentiveLimit,companyId:"FINO001",createDate:this.formData?.createDate||(new Date).toISOString(),updateDate:(new Date).toISOString()};this.formSubmit.emit(r)}static#t=e=()=>(this.\u0275fac=function(r){return new(r||a)(t.rXU(s.ok))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-product"]],inputs:{mode:"mode",formData:"formData"},outputs:{formSubmit:"formSubmit",formClosed:"formClosed"},features:[t.OA$],decls:74,vars:29,consts:[[1,"sme-form-card","ion-no-margin"],[4,"ngIf"],[3,"ngSubmit","formGroup"],["size","12"],["fill","outline",1,"ion-margin-bottom"],["type","text","formControlName","productId","label","Product ID *","label-placement","floating",3,"readonly"],["color","danger",4,"ngIf"],["type","text","formControlName","productName","label","Product Name *","label-placement","floating",3,"readonly"],["formControlName","rawMaterial","label","Raw Material *","label-placement","floating","required","",3,"disabled"],[3,"value",4,"ngFor","ngForOf"],["type","number","step","any","formControlName","weight","label","Weight *","label-placement","floating",3,"readonly"],["type","number","formControlName","wastage","label","Wastage (%) *","label-placement","floating",3,"readonly"],["type","number","step","any","formControlName","norms","label","Norms *","label-placement","floating",3,"readonly"],["type","number","step","any","formControlName","totalWeight","label","Total Weight","label-placement","floating","readonly",""],["type","number","formControlName","cavity","label","Cavity *","label-placement","floating",3,"readonly"],["type","number","step","any","formControlName","shotRate","label","Shot Rate *","label-placement","floating",3,"readonly"],["type","number","step","any","formControlName","rate","label","Rate (Price) *","label-placement","floating",3,"readonly"],["type","number","formControlName","incentiveLimit","label","Incentive Limit *","label-placement","floating",3,"readonly"],["type","number","formControlName","productionShotQty","label","Production Shot Qty (shots) *","label-placement","floating",3,"readonly"],["type","number","step","any","formControlName","perHourProdQty","label","Per Hour Prod. Qty *","label-placement","floating",3,"readonly"],["color","danger"],[3,"value"],["size","6"],["expand","block","type","submit","color","primary","size","large",1,"ion-margin-top",3,"disabled"],["expand","block","type","button","color","medium","size","large",1,"ion-margin-top",3,"click"]],template:function(r,o){1&r&&(t.j41(0,"ion-card",0)(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3),t.k0s(),t.DNE(4,w,2,0,"ion-card-subtitle",1),t.k0s(),t.j41(5,"ion-card-content")(6,"form",2),t.bIt("ngSubmit",function(){return o.onSubmit()}),t.j41(7,"ion-grid")(8,"ion-row")(9,"ion-col",3)(10,"ion-item",4),t.nrm(11,"ion-input",5),t.k0s(),t.DNE(12,S,2,1,"ion-text",6),t.k0s()(),t.j41(13,"ion-row")(14,"ion-col",3)(15,"ion-item",4),t.nrm(16,"ion-input",7),t.k0s(),t.DNE(17,O,2,1,"ion-text",6),t.k0s()(),t.j41(18,"ion-row")(19,"ion-col",3)(20,"ion-item",4)(21,"ion-select",8),t.DNE(22,T,2,2,"ion-select-option",9),t.k0s()(),t.DNE(23,Y,2,1,"ion-text",6),t.k0s()(),t.j41(24,"ion-row")(25,"ion-col",3)(26,"ion-item",4),t.nrm(27,"ion-input",10),t.k0s(),t.DNE(28,q,3,2,"ion-text",6),t.k0s()(),t.j41(29,"ion-row")(30,"ion-col",3)(31,"ion-item",4),t.nrm(32,"ion-input",11),t.k0s(),t.DNE(33,V,4,3,"ion-text",6),t.k0s()(),t.j41(34,"ion-row")(35,"ion-col",3)(36,"ion-item",4),t.nrm(37,"ion-input",12),t.k0s(),t.DNE(38,U,3,2,"ion-text",6),t.k0s()(),t.j41(39,"ion-row")(40,"ion-col",3)(41,"ion-item",4),t.nrm(42,"ion-input",13),t.k0s()()(),t.j41(43,"ion-row")(44,"ion-col",3)(45,"ion-item",4),t.nrm(46,"ion-input",14),t.k0s(),t.DNE(47,Z,4,3,"ion-text",6),t.k0s()(),t.j41(48,"ion-row")(49,"ion-col",3)(50,"ion-item",4),t.nrm(51,"ion-input",15),t.k0s(),t.DNE(52,ot,3,2,"ion-text",6),t.k0s()(),t.j41(53,"ion-row")(54,"ion-col",3)(55,"ion-item",4),t.nrm(56,"ion-input",16),t.k0s(),t.DNE(57,it,3,2,"ion-text",6),t.k0s()(),t.j41(58,"ion-row")(59,"ion-col",3)(60,"ion-item",4),t.nrm(61,"ion-input",17),t.k0s(),t.DNE(62,ct,4,3,"ion-text",6),t.k0s()(),t.j41(63,"ion-row")(64,"ion-col",3)(65,"ion-item",4),t.nrm(66,"ion-input",18),t.k0s(),t.DNE(67,pt,4,3,"ion-text",6),t.k0s()(),t.j41(68,"ion-row")(69,"ion-col",3)(70,"ion-item",4),t.nrm(71,"ion-input",19),t.k0s(),t.DNE(72,_t,3,2,"ion-text",6),t.k0s()(),t.DNE(73,ht,7,1,"ion-row",1),t.k0s()()()()),2&r&&(t.R7$(3),t.SpI(" ","create"===o.mode?"Create Product":"update"===o.mode?"Update Product":"Product Details"," "),t.R7$(),t.Y8G("ngIf","read"!==o.mode),t.R7$(2),t.Y8G("formGroup",o.productForm),t.R7$(5),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.productId.invalid&&(o.f.productId.dirty||o.f.productId.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.productName.invalid&&(o.f.productName.dirty||o.f.productName.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("disabled","read"===o.mode),t.R7$(),t.Y8G("ngForOf",o.rawMaterials),t.R7$(),t.Y8G("ngIf",o.f.rawMaterial.invalid&&(o.f.rawMaterial.dirty||o.f.rawMaterial.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.weight.invalid&&(o.f.weight.dirty||o.f.weight.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.wastage.invalid&&(o.f.wastage.dirty||o.f.wastage.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.norms.invalid&&(o.f.norms.dirty||o.f.norms.touched)&&"read"!==o.mode),t.R7$(8),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.cavity.invalid&&(o.f.cavity.dirty||o.f.cavity.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.shotRate.invalid&&(o.f.shotRate.dirty||o.f.shotRate.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.rate.invalid&&(o.f.rate.dirty||o.f.rate.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.incentiveLimit.invalid&&(o.f.incentiveLimit.dirty||o.f.incentiveLimit.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.productionShotQty.invalid&&(o.f.productionShotQty.dirty||o.f.productionShotQty.touched)&&"read"!==o.mode),t.R7$(4),t.Y8G("readonly","read"===o.mode),t.R7$(),t.Y8G("ngIf",o.f.perHourProdQty.invalid&&(o.f.perHourProdQty.dirty||o.f.perHourProdQty.touched)&&"read"!==o.mode),t.R7$(),t.Y8G("ngIf","read"!==o.mode))},dependencies:[p.MD,p.Sq,p.bT,s.X1,s.qT,s.BC,s.cb,s.YS,s.j4,s.JD,l.bv,l.Jm,l.b_,l.I9,l.ME,l.HW,l.tN,l.hU,l.lO,l.$w,l.uz,l.ln,l.Nm,l.Ip,l.IO,l.su,l.Je,l.Gw],styles:["ion-content[_ngcontent-%COMP%]{height:300px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{background-color:#004d99!important;color:#fff;box-shadow:0 2px 8px #0000004d}ion-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;color:#fff}ion-icon[_ngcontent-%COMP%]{color:#fff}"]}))}return e(),a})();var k=d(385);const Pt=["searchInput"];function Ct(e,a){if(1&e&&(t.j41(0,"ion-item",16)(1,"ion-label"),t.EFF(2," Found "),t.j41(3,"strong"),t.EFF(4),t.k0s(),t.EFF(5," product(s) "),t.k0s()()),2&e){const n=t.XpG();t.R7$(4),t.JRh(n.products.length)}}function bt(e,a){if(1&e){const n=t.RV6();t.j41(0,"ion-item",18)(1,"ion-label",19),t.bIt("click",function(){const r=c.eBV(n).$implicit,o=t.XpG(2);return c.Njj(o.openReadForm(r))}),t.j41(2,"h2"),t.EFF(3),t.j41(4,"ion-badge",20),t.EFF(5),t.k0s()(),t.j41(6,"p",21),t.EFF(7,"Raw Material: "),t.j41(8,"strong"),t.EFF(9),t.k0s()(),t.j41(10,"p",22),t.EFF(11),t.k0s()(),t.j41(12,"ion-buttons",23)(13,"ion-button",24),t.bIt("click",function(){const r=c.eBV(n).$implicit,o=t.XpG(2);return c.Njj(o.openUpdateForm(r))}),t.nrm(14,"ion-icon",25),t.k0s(),t.j41(15,"ion-button",26),t.bIt("click",function(){const r=c.eBV(n).$implicit,o=t.XpG(2);return c.Njj(o.confirmDelete(r))}),t.nrm(16,"ion-icon",27),t.k0s()()()}if(2&e){const n=a.$implicit;t.R7$(3),t.SpI("",n.prodName," "),t.R7$(2),t.SpI("#",n.prodId),t.R7$(4),t.JRh(n.rawMaterial),t.R7$(2),t.Lme("Weight: ",n.weight,"kg | Cavity: ",n.cavity)}}function kt(e,a){if(1&e&&(t.j41(0,"ion-list"),t.DNE(1,bt,17,5,"ion-item",17),t.k0s()),2&e){const n=t.XpG();t.R7$(),t.Y8G("ngForOf",n.products)}}function yt(e,a){if(1&e&&(t.j41(0,"p"),t.EFF(1),t.k0s()),2&e){const n=t.XpG(2);t.R7$(),t.SpI('No products match your search "',n.searchQuery,'"')}}function xt(e,a){1&e&&(t.j41(0,"p"),t.EFF(1,"No products available. Click the add button to create one."),t.k0s())}function Ft(e,a){if(1&e&&(t.j41(0,"ion-card",28)(1,"ion-card-header")(2,"ion-card-title"),t.EFF(3,"No Products Found"),t.k0s()(),t.j41(4,"ion-card-content"),t.DNE(5,yt,2,1,"p",11)(6,xt,2,0,"p",11),t.k0s()()),2&e){const n=t.XpG();t.R7$(5),t.Y8G("ngIf",n.searchQuery),t.R7$(),t.Y8G("ngIf",!n.searchQuery&&0===n.products.length)}}function It(e,a){if(1&e){const n=t.RV6();t.j41(0,"app-header",30),t.bIt("backClicked",function(){c.eBV(n);const r=t.XpG(2);return c.Njj(r.closeForm())}),t.k0s(),t.j41(1,"ion-content")(2,"app-product",31),t.bIt("formSubmit",function(r){c.eBV(n);const o=t.XpG(2);return c.Njj(o.handleFormSubmit(r))})("formClosed",function(){c.eBV(n);const r=t.XpG(2);return c.Njj(r.closeForm())}),t.k0s()()}if(2&e){const n=t.XpG(2);t.Y8G("title","create"===n.formMode?"Create Product":"update"===n.formMode?"Update Product":"Product Details")("showBackButton",!0),t.R7$(2),t.Y8G("mode",n.formMode)("formData",n.selectedProduct)}}function Mt(e,a){if(1&e){const n=t.RV6();t.j41(0,"ion-modal",29),t.bIt("ionModalDidDismiss",function(){c.eBV(n);const r=t.XpG();return c.Njj(r.closeForm())}),t.DNE(1,It,3,4,"ng-template"),t.k0s()}}let vt=(()=>{var e;class a{constructor(i,r,o){this.alertController=i,this.navCtrl=r,this.productService=o,this.products=[],this.formMode=null,this.selectedProduct=null,this.showForm=!1,this.currentPage=1,this.hasMore=!0,this.loading=!1,this.searchQuery="",this.searchSubject=new P.B,this.destroy$=new P.B,this.searchSubject.pipe((0,F.B)(300),(0,I.F)(),(0,M.Q)(this.destroy$)).subscribe(m=>{this.performSearch(m)})}ngOnInit(){console.log("Product Management Component Initialized"),this.loadProducts()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.searchSubject.complete()}loadProducts(i){this.loading||!this.hasMore||(this.loading=!0,this.productService.getProducts(this.currentPage,10,this.searchQuery).subscribe({next:r=>{this.products=1===this.currentPage?r.items:[...this.products,...r.items],this.hasMore=r.paging.currentPage<r.paging.totalPages,this.currentPage++,this.loading=!1,i&&i.target.complete()},error:r=>{console.error("Error loading products:",r),this.loading=!1,i&&i.target.complete()}}))}onSearchInput(i){const r=i.target.value||"";this.searchQuery=r,this.searchSubject.next(r)}performSearch(i){this.searchQuery=i,this.currentPage=1,this.hasMore=!0,this.products=[],this.loadProducts()}clearSearch(){this.searchQuery="",this.searchInput&&(this.searchInput.value=""),this.performSearch("")}openCreateForm(){this.selectedProduct=null,this.formMode="create",this.showForm=!0}openReadForm(i){this.productService.getProduct(i.prodIdSeq).subscribe({next:r=>{this.selectedProduct=r,this.formMode="read",this.showForm=!0},error:r=>{console.error("Error loading product details:",r)}})}openUpdateForm(i){this.productService.getProduct(i.prodIdSeq).subscribe({next:r=>{this.selectedProduct=r,this.formMode="update",this.showForm=!0},error:r=>{console.error("Error loading product details:",r)}})}confirmDelete(i){var r=this;return(0,x.A)(function*(){yield(yield r.alertController.create({header:"Confirm Delete",message:`Are you sure you want to delete product "${i.prodName}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>{r.deleteProduct(i)}}]})).present()})()}deleteProduct(i){this.productService.deleteProduct(i.prodIdSeq).subscribe({next:()=>{this.products=this.products.filter(r=>r.prodIdSeq!==i.prodIdSeq),console.log("Product deleted successfully")},error:r=>{console.error("Error deleting product:",r)}})}handleFormSubmit(i){"create"===this.formMode?this.productService.createProduct(i).subscribe({next:r=>{this.products.unshift(r),this.closeForm(),console.log("Product created successfully")},error:r=>{console.error("Error creating product:",r)}}):"update"===this.formMode&&this.selectedProduct&&this.productService.updateProduct(this.selectedProduct.prodIdSeq,i).subscribe({next:r=>{const o=this.products.findIndex(m=>m.prodIdSeq===this.selectedProduct?.prodIdSeq);o>-1&&(this.products[o]=r),this.closeForm(),console.log("Product updated successfully")},error:r=>{console.error("Error updating product:",r)}}),this.closeForm()}closeForm(){this.showForm=!1,this.selectedProduct=null,this.formMode=null}onHeaderBackClick(){console.log("Header back button clicked - navigating back"),this.navCtrl.back()}static#t=e=()=>(this.\u0275fac=function(r){return new(r||a)(t.rXU(l.hG),t.rXU(v.q9),t.rXU(G))},this.\u0275cmp=t.VBU({type:a,selectors:[["app-product-management"]],viewQuery:function(r,o){if(1&r&&t.GBs(Pt,5),2&r){let m;t.mGM(m=t.lsd())&&(o.searchInput=m.first)}},standalone:!1,decls:20,vars:7,consts:[["searchInput",""],["backAction","back","rightIconColor","primary",3,"backClicked","rightButtonClicked","showBackButton"],[1,"page-header"],[1,"page-title-container"],[1,"page-title"],[1,"page-subtitle"],["fill","solid","color","primary",1,"add-button",3,"click"],["slot","start","name","add-outline"],[1,"search-card"],["placeholder","Search by name, ID, or material...","debounce","0",3,"keyup","ionClear","value"],["class","results-info",4,"ngIf"],[4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"ionInfinite","disabled"],["loadingSpinner","bubbles","loadingText","Loading more products..."],["isOpen","true",3,"ionModalDidDismiss",4,"ngIf"],[1,"results-info"],["class","product-item",4,"ngFor","ngForOf"],[1,"product-item"],[3,"click"],["color","primary"],[1,"material"],[1,"specs"],["slot","end"],["color","secondary",3,"click"],["slot","icon-only","name","create-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[1,"empty-state"],["isOpen","true",3,"ionModalDidDismiss"],["backAction","dismiss",3,"backClicked","title","showBackButton"],[3,"formSubmit","formClosed","mode","formData"]],template:function(r,o){if(1&r){const m=t.RV6();t.j41(0,"app-header",1),t.bIt("backClicked",function(){return c.eBV(m),c.Njj(o.onHeaderBackClick())})("rightButtonClicked",function(){return c.eBV(m),c.Njj(o.openCreateForm())}),t.k0s(),t.j41(1,"ion-content")(2,"div",2)(3,"div",3)(4,"h1",4),t.EFF(5,"Products"),t.k0s(),t.j41(6,"p",5),t.EFF(7,"Manage your product inventory"),t.k0s()(),t.j41(8,"ion-button",6),t.bIt("click",function(){return c.eBV(m),c.Njj(o.openCreateForm())}),t.nrm(9,"ion-icon",7),t.EFF(10," Add "),t.k0s()(),t.j41(11,"ion-card",8)(12,"ion-searchbar",9,0),t.bIt("keyup",function(_){return c.eBV(m),c.Njj(o.onSearchInput(_))})("ionClear",function(){return c.eBV(m),c.Njj(o.clearSearch())}),t.k0s()(),t.DNE(14,Ct,6,1,"ion-item",10)(15,kt,2,1,"ion-list",11)(16,Ft,7,2,"ion-card",12),t.j41(17,"ion-infinite-scroll",13),t.bIt("ionInfinite",function(_){return c.eBV(m),c.Njj(o.loadProducts(_))}),t.nrm(18,"ion-infinite-scroll-content",14),t.k0s(),t.DNE(19,Mt,2,0,"ion-modal",15),t.k0s()}2&r&&(t.Y8G("showBackButton",!0),t.R7$(12),t.Y8G("value",o.searchQuery),t.R7$(2),t.Y8G("ngIf",o.searchQuery),t.R7$(),t.Y8G("ngIf",o.products.length>0),t.R7$(),t.Y8G("ngIf",0===o.products.length&&!o.loading),t.R7$(),t.Y8G("disabled",!o.hasMore),t.R7$(2),t.Y8G("ngIf",o.showForm))},dependencies:[p.Sq,p.bT,l.In,l.Jm,l.QW,l.b_,l.I9,l.ME,l.tN,l.W9,l.iq,l.Ax,l.Hp,l.uz,l.he,l.nf,l.S1,l.Sb,l.Gw,b,k.l],styles:[".page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:20px 16px;gap:12px;background:var(--ion-color-light);border-bottom:1px solid rgba(0,0,0,.08)}.page-title-container[_ngcontent-%COMP%]{flex:1;min-width:0}.page-title-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{margin:0 0 4px;font-size:24px;font-weight:600;color:var(--ion-color-dark);letter-spacing:-.5px}.page-title-container[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{margin:0;font-size:12px;color:var(--ion-color-medium)}.add-button[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;--padding-top: 10px;--padding-bottom: 10px;height:auto;font-weight:500;white-space:nowrap;border-radius:6px;flex-shrink:0;margin:0;min-width:fit-content}.add-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:6px}.search-card[_ngcontent-%COMP%]{position:sticky;top:0;z-index:10;margin:12px;box-shadow:0 2px 4px #00000014;border-radius:8px;background:var(--ion-color-light)}.search-card[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{--background: transparent;--padding-start: 0;--padding-end: 0}.results-info[_ngcontent-%COMP%]{--padding-start: 16px;--padding-end: 16px;font-size:12px;color:var(--ion-color-medium);background:var(--ion-color-light)}.results-info[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:600}.product-item[_ngcontent-%COMP%]{--border-bottom: 1px solid rgba(0, 0, 0, .08);margin-bottom:8px}.product-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{cursor:pointer;padding:8px 0}.product-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:8px;display:flex;align-items:center;gap:8px;font-weight:600}.product-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:10px;padding:4px 8px}.product-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .material[_ngcontent-%COMP%]{margin:4px 0;color:var(--ion-color-medium);font-size:13px}.product-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .material[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{color:var(--ion-color-dark);font-weight:600}.product-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]   .specs[_ngcontent-%COMP%]{margin:4px 0;color:var(--ion-color-medium);font-size:12px}.product-item[_ngcontent-%COMP%]   ion-buttons[_ngcontent-%COMP%]{display:flex;gap:4px}.empty-state[_ngcontent-%COMP%]{margin:40px 16px;text-align:center;box-shadow:0 2px 8px #00000014;border-radius:8px}.empty-state[_ngcontent-%COMP%]   ion-card-header[_ngcontent-%COMP%]{padding-top:24px}.empty-state[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-weight:600;font-size:18px}.empty-state[_ngcontent-%COMP%]   ion-card-content[_ngcontent-%COMP%]{color:var(--ion-color-medium);font-size:14px;padding-bottom:24px}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{padding:16px 12px;gap:8px}.page-title-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:20px}.page-title-container[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:11px}.add-button[_ngcontent-%COMP%]{--padding-start: 12px;--padding-end: 12px;--padding-top: 8px;--padding-bottom: 8px;font-size:13px}}@media (max-width: 380px){.page-header[_ngcontent-%COMP%]{padding:12px 8px;gap:6px}.page-title-container[_ngcontent-%COMP%]   .page-title[_ngcontent-%COMP%]{font-size:18px}.page-title-container[_ngcontent-%COMP%]   .page-subtitle[_ngcontent-%COMP%]{font-size:10px}.add-button[_ngcontent-%COMP%]{--padding-start: 10px;--padding-end: 10px;--padding-top: 6px;--padding-bottom: 6px;font-size:12px}.add-button[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{margin-right:4px}}"]}))}return e(),a})(),jt=(()=>{var e;class a{static#t=e=()=>(this.\u0275fac=function(r){return new(r||a)},this.\u0275mod=t.$C({type:a}),this.\u0275inj=c.G2t({providers:[l.hG],imports:[p.MD,l.bv,s.X1,b,k.l,s.YN,y.iI.forChild([{path:"",component:vt}])]}))}return e(),a})()}}]);