"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[6449],{6449:(L,_,c)=>{c.r(_),c.d(_,{UserManagementModule:()=>z});var h=c(2200),a=c(7343),p=c(4341),j=c(8132),k=c(467),b=c(1413),F=c(9584),y=c(3294),I=c(6977),e=c(3664),r=c(2615),P=c(5035),C=c(9330),g=c(8810),f=c(9437),N=c(5312),R=c(8938),D=c(3067);let B=(()=>{var i;class m{constructor(o,t){this.http=o,this.loginService=t,this.API_URL=`${N.c.apiBaseUrl}/users`}getHeaders(){const o=this.loginService.getToken();return new C.Lr({"Content-Type":"application/json",Authorization:`Bearer ${o}`})}getUsers(o=1,t=R.R.TEN,n){let d=`${this.API_URL}?page=${o}&itemsPerPage=${t}`;return n&&n.trim()&&(d+=`&search=${encodeURIComponent(n.trim())}`),this.http.get(d,{headers:this.getHeaders()}).pipe((0,f.W)(u=>(0,g.$)(()=>u)))}getUser(o){return this.http.get(`${this.API_URL}/${o}`,{headers:this.getHeaders()}).pipe((0,f.W)(t=>(0,g.$)(()=>t)))}createUser(o){return this.http.post(this.API_URL,o,{headers:this.getHeaders()}).pipe((0,f.W)(t=>(0,g.$)(()=>t)))}updateUser(o,t){return this.http.put(`${this.API_URL}/${o}`,t,{headers:this.getHeaders()}).pipe((0,f.W)(n=>(0,g.$)(()=>n)))}deleteUser(o){return this.http.delete(`${this.API_URL}/${o}`,{headers:this.getHeaders()}).pipe((0,f.W)(t=>(0,g.$)(()=>t)))}static#e=i=()=>(this.\u0275fac=function(t){return new(t||m)(r.KVO(C.Qq),r.KVO(D.H))},this.\u0275prov=r.jDH({token:m,factory:m.\u0275fac,providedIn:"root"}))}return i(),m})();var x=c(5473),S=c(7303);function v(i,m){1&i&&(e.j41(0,"ion-card-subtitle"),e.EFF(1," Please fill all required information "),e.k0s())}function G(i,m){if(1&i){const s=e.RV6();e.j41(0,"ion-row")(1,"ion-col",4)(2,"ion-item",5)(3,"ion-input",13),e.mxI("ngModelChange",function(t){r.eBV(s);const n=e.XpG();return e.DH7(n.model.password,t)||(n.model.password=t),r.Njj(t)}),e.k0s()()()()}if(2&i){const s=e.XpG();e.R7$(3),e.R50("ngModel",s.model.password)}}function O(i,m){if(1&i&&(e.j41(0,"ion-row")(1,"ion-col",4)(2,"ion-button",14),e.nrm(3,"ion-icon",15),e.EFF(4),e.k0s()()()),2&i){const s=e.XpG(),o=e.sdS(7);e.R7$(2),e.Y8G("disabled",!o.valid),e.R7$(2),e.SpI(" ","create"===s.mode?"Submit User Details":"Update User Details"," ")}}let M=(()=>{var i;class m{constructor(o){this.location=o,this.mode="create",this.formData=null,this.formSubmit=new e.bkB,this.formClosed=new e.bkB,this.model={id:0,username:"",firstName:"",lastName:"",name:"",email:"",mobile:"",address:"",password:"",createdDate:"",updatedDate:""}}ngOnInit(){this.formData&&this.patchModel(this.formData)}ngOnChanges(o){o.formData&&this.formData&&this.patchModel(this.formData),o.mode&&"create"===this.mode&&this.resetModel()}patchModel(o){this.model={...this.model,...o}}resetModel(){this.model={id:0,username:"",firstName:"",lastName:"",name:"",email:"",mobile:"",address:"",password:"",createdDate:"",updatedDate:""}}goBack(){this.formClosed.emit()}onSubmit(o){"read"!==this.mode&&o.valid&&(this.formSubmit.emit({...this.model}),o.resetForm(),this.resetModel())}static#e=i=()=>(this.\u0275fac=function(t){return new(t||m)(e.rXU(S.aZ))},this.\u0275cmp=e.VBU({type:m,selectors:[["app-user"]],inputs:{mode:"mode",formData:"formData"},outputs:{formSubmit:"formSubmit",formClosed:"formClosed"},features:[e.OA$],decls:40,vars:18,consts:[["userForm","ngForm"],[1,"sme-form-card","ion-no-margin"],[4,"ngIf"],[3,"ngSubmit"],["size","12"],["fill","outline",1,"ion-margin-bottom"],["labelPlacement","floating","label","Username *","name","username","required","",3,"ngModelChange","ngModel","readonly"],["labelPlacement","floating","label","Full Name *","name","name","required","",3,"ngModelChange","ngModel","readonly"],["labelPlacement","floating","label","First Name *","name","firstName","required","",3,"ngModelChange","ngModel","readonly"],["labelPlacement","floating","label","Last Name *","name","lastName","required","",3,"ngModelChange","ngModel","readonly"],["labelPlacement","floating","label","Email *","name","email","type","email","required","",3,"ngModelChange","ngModel","readonly"],["labelPlacement","floating","label","Mobile Number *","name","mobile","type","tel","required","",3,"ngModelChange","ngModel","readonly"],["labelPlacement","floating","label","Address *","name","address","rows","3","required","",3,"ngModelChange","ngModel","readonly"],["labelPlacement","floating","label","Password *","name","password","type","password","required","",3,"ngModelChange","ngModel"],["expand","block","type","submit","color","primary","size","large",1,"ion-margin-top",3,"disabled"],["name","checkmark-circle-outline","slot","start"]],template:function(t,n){if(1&t){const d=e.RV6();e.j41(0,"ion-card",1)(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3),e.k0s(),e.DNE(4,v,2,0,"ion-card-subtitle",2),e.k0s(),e.j41(5,"ion-card-content")(6,"form",3,0),e.bIt("ngSubmit",function(){r.eBV(d);const l=e.sdS(7);return r.Njj(n.onSubmit(l))}),e.j41(8,"ion-grid")(9,"ion-row")(10,"ion-col",4)(11,"ion-item",5)(12,"ion-input",6),e.mxI("ngModelChange",function(l){return r.eBV(d),e.DH7(n.model.username,l)||(n.model.username=l),r.Njj(l)}),e.k0s()()()(),e.DNE(13,G,4,1,"ion-row",2),e.j41(14,"ion-row")(15,"ion-col",4)(16,"ion-item",5)(17,"ion-input",7),e.mxI("ngModelChange",function(l){return r.eBV(d),e.DH7(n.model.name,l)||(n.model.name=l),r.Njj(l)}),e.k0s()()()(),e.j41(18,"ion-row")(19,"ion-col",4)(20,"ion-item",5)(21,"ion-input",8),e.mxI("ngModelChange",function(l){return r.eBV(d),e.DH7(n.model.firstName,l)||(n.model.firstName=l),r.Njj(l)}),e.k0s()()()(),e.j41(22,"ion-row")(23,"ion-col",4)(24,"ion-item",5)(25,"ion-input",9),e.mxI("ngModelChange",function(l){return r.eBV(d),e.DH7(n.model.lastName,l)||(n.model.lastName=l),r.Njj(l)}),e.k0s()()()(),e.j41(26,"ion-row")(27,"ion-col",4)(28,"ion-item",5)(29,"ion-input",10),e.mxI("ngModelChange",function(l){return r.eBV(d),e.DH7(n.model.email,l)||(n.model.email=l),r.Njj(l)}),e.k0s()()()(),e.j41(30,"ion-row")(31,"ion-col",4)(32,"ion-item",5)(33,"ion-input",11),e.mxI("ngModelChange",function(l){return r.eBV(d),e.DH7(n.model.mobile,l)||(n.model.mobile=l),r.Njj(l)}),e.k0s()()()(),e.j41(34,"ion-row")(35,"ion-col",4)(36,"ion-item",5)(37,"ion-textarea",12),e.mxI("ngModelChange",function(l){return r.eBV(d),e.DH7(n.model.address,l)||(n.model.address=l),r.Njj(l)}),e.k0s()()()(),e.DNE(38,O,5,2,"ion-row",2),e.k0s()()()(),e.nrm(39,"app-footer")}2&t&&(e.R7$(3),e.SpI(" ","create"===n.mode?"User Details":"update"===n.mode?"Edit User Details":"User Details"," "),e.R7$(),e.Y8G("ngIf","read"!==n.mode),e.R7$(8),e.R50("ngModel",n.model.username),e.Y8G("readonly","read"===n.mode),e.R7$(),e.Y8G("ngIf","read"!==n.mode),e.R7$(4),e.R50("ngModel",n.model.name),e.Y8G("readonly","read"===n.mode),e.R7$(4),e.R50("ngModel",n.model.firstName),e.Y8G("readonly","read"===n.mode),e.R7$(4),e.R50("ngModel",n.model.lastName),e.Y8G("readonly","read"===n.mode),e.R7$(4),e.R50("ngModel",n.model.email),e.Y8G("readonly","read"===n.mode),e.R7$(4),e.R50("ngModel",n.model.mobile),e.Y8G("readonly","read"===n.mode),e.R7$(4),e.R50("ngModel",n.model.address),e.Y8G("readonly","read"===n.mode),e.R7$(),e.Y8G("ngIf","read"!==n.mode))},dependencies:[x.n,p.YN,p.qT,p.BC,p.cb,p.YS,p.vS,p.cV,a.bv,a.Jm,a.b_,a.I9,a.ME,a.HW,a.tN,a.hU,a.lO,a.iq,a.$w,a.uz,a.ln,a.nc,a.Gw,h.MD,h.bT],styles:["ion-content[_ngcontent-%COMP%]{height:300px}ion-header[_ngcontent-%COMP%]   ion-toolbar[_ngcontent-%COMP%]{background-color:#004d99!important;color:#fff;box-shadow:0 2px 8px #0000004d}ion-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.2rem;color:#fff}ion-icon[_ngcontent-%COMP%]{color:#fff}"]}))}return i(),m})();var U=c(385);const T=["searchInput"];function $(i,m){if(1&i&&(e.j41(0,"ion-item",16)(1,"ion-label"),e.EFF(2," Found "),e.j41(3,"strong"),e.EFF(4),e.k0s(),e.EFF(5," user(s) "),e.k0s()()),2&i){const s=e.XpG();e.R7$(4),e.JRh(s.users.length)}}function w(i,m){if(1&i){const s=e.RV6();e.j41(0,"ion-item",18)(1,"ion-label",19),e.bIt("click",function(){const t=r.eBV(s).$implicit,n=e.XpG(2);return r.Njj(n.openReadForm(t))}),e.j41(2,"h2"),e.EFF(3),e.j41(4,"ion-badge",20),e.EFF(5),e.k0s()(),e.j41(6,"p",21),e.EFF(7),e.k0s(),e.j41(8,"p",22),e.EFF(9),e.k0s()(),e.j41(10,"ion-buttons",23)(11,"ion-button",24),e.bIt("click",function(){const t=r.eBV(s).$implicit,n=e.XpG(2);return r.Njj(n.openUpdateForm(t))}),e.nrm(12,"ion-icon",25),e.k0s(),e.j41(13,"ion-button",26),e.bIt("click",function(){const t=r.eBV(s).$implicit,n=e.XpG(2);return r.Njj(n.confirmDelete(t))}),e.nrm(14,"ion-icon",27),e.k0s()()()}if(2&i){const s=m.$implicit;e.R7$(3),e.SpI("",s.name," "),e.R7$(2),e.SpI("@",s.username),e.R7$(2),e.Lme("",s.firstName," ",s.lastName),e.R7$(2),e.Lme("Email: ",s.email," | Mobile: ",s.mobile)}}function E(i,m){if(1&i&&(e.j41(0,"ion-list"),e.DNE(1,w,15,6,"ion-item",17),e.k0s()),2&i){const s=e.XpG();e.R7$(),e.Y8G("ngForOf",s.users)}}function V(i,m){if(1&i&&(e.j41(0,"p"),e.EFF(1),e.k0s()),2&i){const s=e.XpG(2);e.R7$(),e.SpI('No users match your search "',s.searchQuery,'"')}}function Y(i,m){1&i&&(e.j41(0,"p"),e.EFF(1,"No users available. Click the add button to create one."),e.k0s())}function H(i,m){if(1&i&&(e.j41(0,"ion-card",28)(1,"ion-card-header")(2,"ion-card-title"),e.EFF(3,"No Users Found"),e.k0s()(),e.j41(4,"ion-card-content"),e.DNE(5,V,2,1,"p",11)(6,Y,2,0,"p",11),e.k0s()()),2&i){const s=e.XpG();e.R7$(5),e.Y8G("ngIf",s.searchQuery),e.R7$(),e.Y8G("ngIf",!s.searchQuery&&0===s.users.length)}}function X(i,m){if(1&i){const s=e.RV6();e.j41(0,"app-header",30),e.bIt("backClicked",function(){r.eBV(s);const t=e.XpG(2);return r.Njj(t.closeForm())}),e.k0s(),e.j41(1,"ion-content")(2,"app-user",31),e.bIt("formSubmit",function(t){r.eBV(s);const n=e.XpG(2);return r.Njj(n.handleFormSubmit(t))})("formClosed",function(){r.eBV(s);const t=e.XpG(2);return r.Njj(t.closeForm())}),e.k0s()()}if(2&i){const s=e.XpG(2);e.Y8G("title","create"===s.formMode?"Create User":"update"===s.formMode?"Update User":"User Details")("showBackButton",!0),e.R7$(2),e.Y8G("mode",s.formMode)("formData",s.selectedUser)}}function Q(i,m){if(1&i){const s=e.RV6();e.j41(0,"ion-modal",29),e.bIt("ionModalDidDismiss",function(){r.eBV(s);const t=e.XpG();return r.Njj(t.closeForm())}),e.DNE(1,X,3,4,"ng-template"),e.k0s()}}let A=(()=>{var i;class m{constructor(o,t,n){this.alertController=o,this.navCtrl=t,this.userService=n,this.users=[],this.formMode=null,this.selectedUser=null,this.showForm=!1,this.currentPage=1,this.hasMore=!0,this.loading=!1,this.searchQuery="",this.searchSubject=new b.B,this.destroy$=new b.B,this.searchSubject.pipe((0,F.B)(300),(0,y.F)(),(0,I.Q)(this.destroy$)).subscribe(d=>{this.performSearch(d)})}ngOnInit(){this.loadUsers()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete(),this.searchSubject.complete()}loadUsers(o){this.loading||!this.hasMore||(this.loading=!0,this.userService.getUsers(this.currentPage,10,this.searchQuery).subscribe({next:t=>{this.users=1===this.currentPage?t.items:[...this.users,...t.items],this.hasMore=t.paging.currentPage<t.paging.totalPages,this.currentPage++,this.loading=!1,o&&o.target.complete()},error:t=>{console.error("Error loading users:",t),this.loading=!1,o&&o.target.complete()}}))}onSearchInput(o){this.searchQuery=o.target.value||"",this.searchSubject.next(this.searchQuery)}performSearch(o){this.searchQuery=o,this.currentPage=1,this.hasMore=!0,this.users=[],this.loadUsers()}clearSearch(){this.searchQuery="",this.searchInput&&(this.searchInput.value=""),this.performSearch("")}openCreateForm(){this.selectedUser=null,this.formMode="create",this.showForm=!0}openReadForm(o){this.userService.getUser(o.id).subscribe({next:t=>{this.selectedUser=t,this.formMode="read",this.showForm=!0}})}openUpdateForm(o){this.userService.getUser(o.id).subscribe({next:t=>{this.selectedUser=t,this.formMode="update",this.showForm=!0}})}confirmDelete(o){var t=this;return(0,k.A)(function*(){yield(yield t.alertController.create({header:"Confirm Delete",message:`Delete user "${o.username}"?`,buttons:[{text:"Cancel",role:"cancel"},{text:"Delete",handler:()=>t.deleteUser(o)}]})).present()})()}deleteUser(o){this.userService.deleteUser(o.id).subscribe({next:()=>{this.users=this.users.filter(t=>t.id!==o.id)}})}handleFormSubmit(o){"create"===this.formMode?this.userService.createUser(o).subscribe({next:t=>{this.users.unshift(t),this.closeForm()}}):"update"===this.formMode&&this.selectedUser&&this.userService.updateUser(this.selectedUser.id,o).subscribe({next:t=>{const n=this.users.findIndex(d=>d.id===this.selectedUser?.id);n>-1&&(this.users[n]=t),this.closeForm()}})}closeForm(){this.showForm=!1,this.selectedUser=null,this.formMode=null}onHeaderBackClick(){this.navCtrl.back()}static#e=i=()=>(this.\u0275fac=function(t){return new(t||m)(e.rXU(a.hG),e.rXU(P.q9),e.rXU(B))},this.\u0275cmp=e.VBU({type:m,selectors:[["app-user-management"]],viewQuery:function(t,n){if(1&t&&e.GBs(T,5),2&t){let d;e.mGM(d=e.lsd())&&(n.searchInput=d.first)}},standalone:!1,decls:20,vars:7,consts:[["searchInput",""],["backAction","back","rightIconColor","primary",3,"backClicked","rightButtonClicked","showBackButton"],[1,"page-header"],[1,"page-title-container"],[1,"page-title"],[1,"page-subtitle"],["fill","solid","color","primary",1,"add-button",3,"click"],["slot","start","name","add-outline"],[1,"search-card"],["placeholder","Search by username, name, or email...","debounce","0",3,"keyup","ionClear","value"],["class","results-info",4,"ngIf"],[4,"ngIf"],["class","empty-state",4,"ngIf"],[3,"ionInfinite","disabled"],["loadingSpinner","bubbles","loadingText","Loading more users..."],["isOpen","true",3,"ionModalDidDismiss",4,"ngIf"],[1,"results-info"],["class","user-item",4,"ngFor","ngForOf"],[1,"user-item"],[3,"click"],["color","primary"],[1,"details"],[1,"contact"],["slot","end"],["color","secondary",3,"click"],["slot","icon-only","name","create-outline"],["color","danger",3,"click"],["slot","icon-only","name","trash-outline"],[1,"empty-state"],["isOpen","true",3,"ionModalDidDismiss"],["backAction","dismiss",3,"backClicked","title","showBackButton"],[3,"formSubmit","formClosed","mode","formData"]],template:function(t,n){if(1&t){const d=e.RV6();e.j41(0,"app-header",1),e.bIt("backClicked",function(){return r.eBV(d),r.Njj(n.onHeaderBackClick())})("rightButtonClicked",function(){return r.eBV(d),r.Njj(n.openCreateForm())}),e.k0s(),e.j41(1,"ion-content")(2,"div",2)(3,"div",3)(4,"h1",4),e.EFF(5,"Users"),e.k0s(),e.j41(6,"p",5),e.EFF(7,"Manage user accounts"),e.k0s()(),e.j41(8,"ion-button",6),e.bIt("click",function(){return r.eBV(d),r.Njj(n.openCreateForm())}),e.nrm(9,"ion-icon",7),e.EFF(10," Add "),e.k0s()(),e.j41(11,"ion-card",8)(12,"ion-searchbar",9,0),e.bIt("keyup",function(l){return r.eBV(d),r.Njj(n.onSearchInput(l))})("ionClear",function(){return r.eBV(d),r.Njj(n.clearSearch())}),e.k0s()(),e.DNE(14,$,6,1,"ion-item",10)(15,E,2,1,"ion-list",11)(16,H,7,2,"ion-card",12),e.j41(17,"ion-infinite-scroll",13),e.bIt("ionInfinite",function(l){return r.eBV(d),r.Njj(n.loadUsers(l))}),e.nrm(18,"ion-infinite-scroll-content",14),e.k0s(),e.DNE(19,Q,2,0,"ion-modal",15),e.k0s()}2&t&&(e.Y8G("showBackButton",!0),e.R7$(12),e.Y8G("value",n.searchQuery),e.R7$(2),e.Y8G("ngIf",n.searchQuery),e.R7$(),e.Y8G("ngIf",n.users.length>0),e.R7$(),e.Y8G("ngIf",0===n.users.length&&!n.loading),e.R7$(),e.Y8G("disabled",!n.hasMore),e.R7$(2),e.Y8G("ngIf",n.showForm))},dependencies:[h.Sq,h.bT,a.In,a.Jm,a.QW,a.b_,a.I9,a.ME,a.tN,a.W9,a.iq,a.Ax,a.Hp,a.uz,a.he,a.nf,a.S1,a.Sb,a.Gw,M,U.l],styles:[".page-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:16px;background:var(--ion-color-light);border-bottom:1px solid var(--ion-color-medium)}.page-title-container[_ngcontent-%COMP%]{flex:1}.page-title[_ngcontent-%COMP%]{margin:0;font-size:1.5rem;font-weight:600;color:var(--ion-color-dark)}.page-subtitle[_ngcontent-%COMP%]{margin:4px 0 0;font-size:.9rem;color:var(--ion-color-medium-shade)}.add-button[_ngcontent-%COMP%]{--border-radius: 8px;height:40px;font-weight:500}.search-card[_ngcontent-%COMP%]{margin:16px 16px 8px;border-radius:12px;box-shadow:0 2px 8px #0000001a}.search-card[_ngcontent-%COMP%]   ion-searchbar[_ngcontent-%COMP%]{--background: transparent;--border-radius: 8px;padding:4px}.results-info[_ngcontent-%COMP%]{--background: var(--ion-color-light);--color: var(--ion-color-medium-shade);font-size:.9rem;margin:0 16px 8px;border-radius:8px}.user-item[_ngcontent-%COMP%]{margin:8px 16px;border-radius:12px;--background: var(--ion-color-light);box-shadow:0 2px 8px #00000014;--border-color: transparent}.user-item[_ngcontent-%COMP%]   ion-label[_ngcontent-%COMP%]{cursor:pointer;padding:8px 0}.user-item[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;margin-bottom:8px;color:var(--ion-color-dark)}.user-item[_ngcontent-%COMP%]   .details[_ngcontent-%COMP%], .user-item[_ngcontent-%COMP%]   .contact[_ngcontent-%COMP%]{font-size:.9rem;color:var(--ion-color-medium-shade);margin:4px 0}.user-item[_ngcontent-%COMP%]   ion-badge[_ngcontent-%COMP%]{font-size:.75rem;margin-left:8px}.empty-state[_ngcontent-%COMP%]{margin:32px 16px;text-align:center;border-radius:12px;box-shadow:0 2px 8px #0000001a}.empty-state[_ngcontent-%COMP%]   ion-card-title[_ngcontent-%COMP%]{color:var(--ion-color-medium-shade);font-size:1.2rem}.empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:var(--ion-color-medium);margin:8px 0}ion-button[_ngcontent-%COMP%]{--border-radius: 8px}@media (max-width: 768px){.page-header[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:12px}.add-button[_ngcontent-%COMP%]{width:100%}}"]}))}return i(),m})(),z=(()=>{var i;class m{static#e=i=()=>(this.\u0275fac=function(t){return new(t||m)},this.\u0275mod=e.$C({type:m}),this.\u0275inj=r.G2t({providers:[a.hG],imports:[h.MD,a.bv,p.YN,M,U.l,j.iI.forChild([{path:"",component:A}])]}))}return i(),m})()}}]);